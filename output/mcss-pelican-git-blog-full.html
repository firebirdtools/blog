<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#">
<head>
  <meta charset="UTF-8" />
  <title>mcss-pelican-git blog full | blog</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="https://firebirdtools.github.io/static/m-dark.css" />
  <link rel="canonical" href="https://firebirdtools.github.io/blog/mcss-pelican-git-blog-full.html" />
  <link href="https://firebirdtools.github.io/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="blog" />
  <link href="https://firebirdtools.github.io/blog/feeds/mcss.atom.xml" type="application/atom+xml" rel="alternate" title="blog | mcss" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
  <meta property="og:site_name" content="blog" />
  <meta property="og:title" content="mcss-pelican-git blog full" />
  <meta name="twitter:title" content="mcss-pelican-git blog full" />
  <meta property="og:url" content="https://firebirdtools.github.io/blog/mcss-pelican-git-blog-full.html" />
  <meta property="og:description" content="完整过程" />
  <meta name="twitter:description" content="完整过程" />
  <meta name="twitter:card" content="summary" />
  <meta property="og:type" content="article" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="https://firebirdtools.github.io/blog/" id="m-navbar-brand" class="m-col-t-9 m-col-m-none m-left-m">blog</a>
    </div>
  </div>
</nav></header>
<main>
<div class="m-container">
  <div class="m-row">
    <article class="m-col-m-10 m-nopadb">
      <header>
        <h1><a href="https://firebirdtools.github.io/blog/mcss-pelican-git-blog-full.html" rel="bookmark" title="Permalink to mcss-pelican-git blog full">
          <time class="m-date" datetime="2019-01-15T00:00:00+01:00">
            1月 <span class="m-date-day">15</span> 2019
          </time>
          mcss-pelican-git blog full
        </a></h1>
        <p>完整过程</p>
      </header>
      <div class="m-clearfix-l"></div>
<!-- content -->
<p><a href="https://mcss.mosra.cz/">mcss网站</a></p>
<hr />
<section id="github">
<h2><a href="#github">GitHub</a></h2>
<ol>
<li>New repository</li>
<li>blog name</li>
<li>create repository</li>
</ol>
</section>
<hr />
<section id="test-git">
<h2><a href="#test-git">test git</a></h2>
<pre class="code sh"><span class="nb">echo</span> <span class="s2">&quot;# blog&quot;</span> &gt;&gt; README.md
git init
git add README.md
git commit -m <span class="s2">&quot;first commit&quot;</span>
git remote add origin https://github.com/firebirdtools/blog.git
git push -u origin master</pre>
<section id="sample-code-1">
<h3><a href="#sample-code-1">sample code 1</a></h3>
<p>执行如下命令后，再刷新浏览器上的blog网页，如我的是：<a href="https://github.com/firebirdtools/blog">https://github.com/firebirdtools/blog</a></p>
<pre class="code sh">firebird&#64;tools:~/github$ mkdir blog <span class="o">&amp;&amp;</span> <span class="nb">cd</span> blog
firebird&#64;tools:~/github/blog$ <span class="nb">echo</span> <span class="s2">&quot;# blog&quot;</span> &gt;&gt;README.md
firebird&#64;tools:~/github/blog$ git init
已初始化空的 Git 仓库于 /home/firebird/github/blog/.git/
firebird&#64;tools:~/github/blog$ git add README.md
firebird&#64;tools:~/github/blog$ git commit -m <span class="s2">&quot;first commit&quot;</span>
<span class="o">[</span>master（根提交） 384328f<span class="o">]</span> first commit
 <span class="m">1</span> file changed, <span class="m">1</span> insertion<span class="o">(</span>+<span class="o">)</span>
 create mode <span class="m">100644</span> README.md
firebird&#64;tools:~/github/blog$ git remote add origin https://github.com/firebirdtools/blog.git
firebird&#64;tools:~/github/blog$ git push -u origin master
Username <span class="k">for</span> <span class="s1">'https://github.com'</span>: firebirdtools
Password <span class="k">for</span> <span class="s1">'https://firebirdtools&#64;github.com'</span>:
对象计数中: <span class="m">3</span>, 完成.
写入对象中: <span class="m">100</span>% <span class="o">(</span><span class="m">3</span>/3<span class="o">)</span>, <span class="m">219</span> bytes <span class="p">|</span> <span class="m">219</span>.00 KiB/s, 完成.
Total <span class="m">3</span> <span class="o">(</span>delta <span class="m">0</span><span class="o">)</span>, reused <span class="m">0</span> <span class="o">(</span>delta <span class="m">0</span><span class="o">)</span>
To https://github.com/firebirdtools/blog.git
 * <span class="o">[</span>new branch<span class="o">]</span>      master -&gt; master
分支 <span class="s1">'master'</span> 设置为跟踪来自 <span class="s1">'origin'</span> 的远程分支 <span class="s1">'master'</span>。
firebird&#64;tools:~/github/blog$</pre>
</section>
</section>
<hr />
<section id="pelican-quickstart">
<h2><a href="#pelican-quickstart">pelican-quickstart 初始化</a></h2>
<section id="sample-code-2">
<h3><a href="#sample-code-2">sample code 2</a></h3>
<ul>
<li>通过 <code>pelican-quickstart</code> 会自动生成相关目录和文件</li>
<li>使用 <code>tree</code>  命令，可显示示例中的文件；若没有，则安装 <code>sudo apt-get install tree</code></li>
</ul>
<pre class="code sh">firebird&#64;tools:~/github/blog$ pelican-quickstart
Welcome to pelican-quickstart v4.0.1.

This script will <span class="nb">help</span> you create a new Pelican-based website.

Please answer the following questions so this script can generate the files
needed by Pelican.


&gt; Where <span class="k">do</span> you want to create your new web site? <span class="o">[</span>.<span class="o">]</span>
&gt; What will be the title of this web site? blog
&gt; Who will be the author of this web site? firebird
&gt; What will be the default language of this web site? <span class="o">[</span>zh<span class="o">]</span> en
&gt; Do you want to specify a URL prefix? e.g., https://example.com   <span class="o">(</span>Y/n<span class="o">)</span> n
&gt; Do you want to <span class="nb">enable</span> article pagination? <span class="o">(</span>Y/n<span class="o">)</span>
&gt; How many articles per page <span class="k">do</span> you want? <span class="o">[</span><span class="m">10</span><span class="o">]</span>
&gt; What is your <span class="nb">time</span> zone? <span class="o">[</span>Europe/Paris<span class="o">]</span>
&gt; Do you want to generate a tasks.py/Makefile to automate generation and publishing? <span class="o">(</span>Y/n<span class="o">)</span>
&gt; Do you want to upload your website using FTP? <span class="o">(</span>y/N<span class="o">)</span>
&gt; Do you want to upload your website using SSH? <span class="o">(</span>y/N<span class="o">)</span>
&gt; Do you want to upload your website using Dropbox? <span class="o">(</span>y/N<span class="o">)</span>
&gt; Do you want to upload your website using S3? <span class="o">(</span>y/N<span class="o">)</span>
&gt; Do you want to upload your website using Rackspace Cloud Files? <span class="o">(</span>y/N<span class="o">)</span>
&gt; Do you want to upload your website using GitHub Pages? <span class="o">(</span>y/N<span class="o">)</span>
Done. Your new project is available at /home/firebird/github/blog
firebird&#64;tools:~/github/blog$ tree
.
├── content
├── Makefile
├── output
├── pelicanconf.py
├── publishconf.py
├── README.md
└── tasks.py

<span class="m">2</span> directories, <span class="m">5</span> files
firebird&#64;tools:~/github/blog$</pre>
</section>
</section>
<hr />
<section id="m-css">
<h2><a href="#m-css">m.css</a></h2>
<ol>
<li>在项目中，安装m.css，以便引用</li>
</ol>
<pre class="code sh">git submodule add git://github.com/mosra/m.css</pre>
<ol start="2">
<li>打开 <code>publishconf.py</code> ，添加如下代码</li>
</ol>
<pre class="code py"><span class="n">THEME</span> <span class="o">=</span> <span class="s1">'m.css/pelican-theme'</span>
<span class="n">THEME_STATIC_DIR</span> <span class="o">=</span> <span class="s1">'static'</span>
<span class="n">DIRECT_TEMPLATES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'index'</span><span class="p">]</span>

<span class="n">M_CSS_FILES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600'</span><span class="p">,</span>
               <span class="s1">'/static/m-dark.css'</span><span class="p">]</span>
<span class="n">M_THEME_COLOR</span> <span class="o">=</span> <span class="s1">'#22272e'</span>

<span class="n">PLUGIN_PATHS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'m.css/pelican-plugins'</span><span class="p">]</span>
<span class="n">PLUGINS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'m.htmlsanity'</span><span class="p">]</span></pre>
<section id="sample-code-3">
<h3><a href="#sample-code-3">sample code 3</a></h3>
<pre class="code sh">firebird&#64;tools:~/github/blog$ git submodule add git://github.com/mosra/m.css
正克隆到 <span class="s1">'/home/firebird/github/blog/m.css'</span>...
remote: Enumerating objects: <span class="m">566</span>, <span class="k">done</span>.
remote: Counting objects: <span class="m">100</span>% <span class="o">(</span><span class="m">566</span>/566<span class="o">)</span>, <span class="k">done</span>.
remote: Compressing objects: <span class="m">100</span>% <span class="o">(</span><span class="m">331</span>/331<span class="o">)</span>, <span class="k">done</span>.
remote: Total <span class="m">8828</span> <span class="o">(</span>delta <span class="m">359</span><span class="o">)</span>, reused <span class="m">357</span> <span class="o">(</span>delta <span class="m">231</span><span class="o">)</span>, pack-reused <span class="m">8262</span>
接收对象中: <span class="m">100</span>% <span class="o">(</span><span class="m">8828</span>/8828<span class="o">)</span>, <span class="m">3</span>.04 MiB <span class="p">|</span> <span class="m">49</span>.00 KiB/s, 完成.
处理 delta 中: <span class="m">100</span>% <span class="o">(</span><span class="m">6328</span>/6328<span class="o">)</span>, 完成.
firebird&#64;tools:~/github/blog$</pre>
<p>publishconf.py文件添加后内容</p>
<pre class="code py"><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*- #</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">unicode_literals</span>

<span class="c1"># This file is only used if you use `make publish` or</span>
<span class="c1"># explicitly specify it as your config file.</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">curdir</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">pelicanconf</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># If your site is available via HTTPS, make sure SITEURL begins with https://</span>
<span class="n">SITEURL</span> <span class="o">=</span> <span class="s1">''</span>
<span class="n">RELATIVE_URLS</span> <span class="o">=</span> <span class="bp">False</span>

<span class="n">FEED_ALL_ATOM</span> <span class="o">=</span> <span class="s1">'feeds/all.atom.xml'</span>
<span class="n">CATEGORY_FEED_ATOM</span> <span class="o">=</span> <span class="s1">'feeds/{slug}.atom.xml'</span>

<span class="n">DELETE_OUTPUT_DIRECTORY</span> <span class="o">=</span> <span class="bp">True</span>

<span class="c1"># Following items are often useful when publishing</span>

<span class="c1">#DISQUS_SITENAME = &quot;&quot;</span>
<span class="c1">#GOOGLE_ANALYTICS = &quot;&quot;</span>


<span class="c1"># ================================================================ #</span>
<span class="c1"># add m.css-theme</span>
<span class="n">THEME</span> <span class="o">=</span> <span class="s1">'m.css/pelican-theme'</span>
<span class="n">THEME_STATIC_DIR</span> <span class="o">=</span> <span class="s1">'static'</span>
<span class="n">DIRECT_TEMPLATES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'index'</span><span class="p">]</span>

<span class="n">M_CSS_FILES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600'</span><span class="p">,</span>
                <span class="s1">'/static/m-dark.css'</span><span class="p">]</span>
<span class="n">M_THEME_COLOR</span> <span class="o">=</span> <span class="s1">'#22272e'</span>

<span class="n">PLUGIN_PATHS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'m.css/pelican-plugins'</span><span class="p">]</span>
<span class="n">PLUGINS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'m.htmlsanity'</span><span class="p">]</span>
<span class="c1"># ================================================================ #</span></pre>
</section>
</section>
<hr />
<section id="id1">
<h2><a href="#id1">本地预览</a></h2>
<ol>
<li>编辑好的rst文件放置于 <code>content\</code> 文件夹</li>
</ol>
<p>rst示例代码</p>
<pre class="code rst"><span class="gh">mcss-pelican-git blog full</span>
<span class="gh">################################</span>

<span class="nc">:date:</span> <span class="nf">2019-01-15</span>
<span class="nc">:category:</span> <span class="nf">mcss</span>
<span class="nc">:tags:</span> <span class="nf">Pelican, mcss, re&shy;Struc&shy;tured&shy;Text, git</span>
<span class="nc">:summary:</span> <span class="nf">完整过程</span>

<span class="s">`mcss网站 </span><span class="si">&lt;https://mcss.mosra.cz/&gt;</span><span class="s">`_</span></pre>
<ol start="2">
<li>本地预览，运行如下命令</li>
</ol>
<pre class="code sh">pelican content -s publishconf.py
<span class="nb">cd</span> output
python3 -m http.server</pre>
<p>访问 <a href="http://localhost:8000">http://localhost:8000</a> ，即可预览到带主题的网页。</p>
<p>输入： <code>ctrl + c</code> 停止服务</p>
<section id="sample-code-4">
<h3><a href="#sample-code-4">sample code 4</a></h3>
<pre class="code sh">firebird&#64;tools:~/github/blog$ pelican content -s publishconf.py
WARNING: Feeds generated without SITEURL <span class="nb">set</span> properly may not be valid
Done: Processed <span class="m">1</span> article, <span class="m">0</span> drafts, <span class="m">0</span> pages, <span class="m">0</span> hidden pages and <span class="m">0</span> draft pages in <span class="m">0</span>.33 seconds.
firebird&#64;tools:~/github/blog$ <span class="nb">cd</span> output
firebird&#64;tools:~/github/blog/output$ python3 -m http.server
Serving HTTP on <span class="m">0</span>.0.0.0 port <span class="m">8000</span> <span class="o">(</span>http://0.0.0.0:8000/<span class="o">)</span> ...</pre>
</section>
</section>
<hr />
<section id="id2">
<h2><a href="#id2">发布到github</a></h2>
<p><code>publishconf.py</code> 文件更改后内容：</p>
<pre class="code py"><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*- #</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">unicode_literals</span>

<span class="c1"># This file is only used if you use `make publish` or</span>
<span class="c1"># explicitly specify it as your config file.</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">curdir</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">pelicanconf</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># If your site is available via HTTPS, make sure SITEURL begins with https://</span>
<span class="n">SITEURL</span> <span class="o">=</span> <span class="s1">'https://firebirdtools.github.io/blog'</span>
<span class="n">RELATIVE_URLS</span> <span class="o">=</span> <span class="bp">False</span>

<span class="n">FEED_ALL_ATOM</span> <span class="o">=</span> <span class="s1">'feeds/all.atom.xml'</span>
<span class="n">CATEGORY_FEED_ATOM</span> <span class="o">=</span> <span class="s1">'feeds/{slug}.atom.xml'</span>

<span class="n">DELETE_OUTPUT_DIRECTORY</span> <span class="o">=</span> <span class="bp">True</span>

<span class="c1"># Following items are often useful when publishing</span>

<span class="c1">#DISQUS_SITENAME = &quot;&quot;</span>
<span class="c1">#GOOGLE_ANALYTICS = &quot;&quot;</span>

<span class="c1"># ================================================================ #</span>
<span class="c1"># add m.css-theme</span>
<span class="n">THEME</span> <span class="o">=</span> <span class="s1">'m.css/pelican-theme'</span>
<span class="n">THEME_STATIC_DIR</span> <span class="o">=</span> <span class="s1">'static'</span>
<span class="n">DIRECT_TEMPLATES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'index'</span><span class="p">]</span>

<span class="n">M_CSS_FILES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600'</span><span class="p">,</span>
               <span class="s1">'https://firebirdtools.github.io/blog/static/m-dark.css'</span><span class="p">]</span>
<span class="n">M_THEME_COLOR</span> <span class="o">=</span> <span class="s1">'#22272e'</span>

<span class="n">PLUGIN_PATHS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'m.css/pelican-plugins'</span><span class="p">]</span>
<span class="n">PLUGINS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'m.htmlsanity'</span><span class="p">]</span>
<span class="c1"># ================================================================ #</span></pre>
<p>发布于github</p>
<pre class="code sh">firebird&#64;tools:~/gitcode/mcss-pelican-blog$ pelican content -s publishconf.py
<span class="c1"># ......
# Done: Processed 0 articles, 0 drafts, ... in 0.15 seconds.
</span>firebird&#64;tools:~/gitcode/mcss-pelican-blog$ ghp-import output -b gh-pages
firebird&#64;tools:~/gitcode/mcss-pelican-blog$ git push origin gh-pages</pre>
</section>
<!-- /content -->
      <footer>
        <p>Posted by <a href="https://firebirdtools.github.io/blog/author/firebird.html">firebird</a> on <time datetime="2019-01-15T00:00:00+01:00">二 15 一月 2019</time> in <a href="https://firebirdtools.github.io/blog/category/mcss.html">mcss</a>. Tags: <a href="https://firebirdtools.github.io/blog/tag/pelican.html">Pelican</a>, <a href="https://firebirdtools.github.io/blog/tag/mcss.html">mcss</a>, <a href="https://firebirdtools.github.io/blog/tag/restructuredtext.html">re­Struc­tured­Text</a>, <a href="https://firebirdtools.github.io/blog/tag/git.html">git</a>.</p>
      </footer>
    </article>
    <nav class="m-navpanel m-col-m-2">
      <h3>Categories</h3>
      <ol class="m-block-bar-m">
        <li><a href="https://firebirdtools.github.io/blog/category/mcss.html">mcss</a></li>
      </ol>
      <h3>Tag cloud</h3>
      <ul class="m-tagcloud">
        <li class="m-tag-5"><a href="https://firebirdtools.github.io/blog/tag/git.html">git</a></li>
        <li class="m-tag-5"><a href="https://firebirdtools.github.io/blog/tag/mcss.html">mcss</a></li>
        <li class="m-tag-5"><a href="https://firebirdtools.github.io/blog/tag/pelican.html">Pelican</a></li>
        <li class="m-tag-5"><a href="https://firebirdtools.github.io/blog/tag/restructuredtext.html">re­Struc­tured­Text</a></li>
      </ul>
    </nav>
  </div>
</div>
</main>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>blog. Powered by <a href="https://getpelican.com">Pelican</a> and <a href="https://mcss.mosra.cz">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>